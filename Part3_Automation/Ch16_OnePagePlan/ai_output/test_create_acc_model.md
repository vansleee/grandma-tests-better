# 會員折扣（運費）系統－ACC 模型分析
**角色：資深測試策略師**  
**情境：支援 Google / Apple ID 快速登入**

---

## 一、Attributes（關鍵屬性）

> 系統「是什麼」，聚焦品質與風險面向

| 屬性 | 說明 | 風險等級 |
|---|---|---|
| 會員身分正確性 | 正確識別 VIP / 一般會員（含第三方登入後身分綁定） | 🔴 高 |
| 金額判斷準確性 | 是否正確判斷「超過 2000 元」（> vs ≥） | 🔴 高 |
| 活動期間判斷 | 僅在活動期間套用免運規則 | 🟠 中 |
| 規則一致性 | 前端顯示與後端計算結果一致 | 🔴 高 |
| 可追溯性 | 訂單可回溯運費計算依據 | 🟠 中 |

---

## 二、Components（核心元件）

> 系統「由哪些部分組成」，用於測試切分與責任邊界

| 元件 | 說明 | 風險等級 |
|---|---|---|
| 身分驗證模組 | Google / Apple ID 登入後的會員等級判定 | 🔴 高 |
| 會員資料服務 | 儲存並回傳會員類型（VIP / 一般） | 🔴 高 |
| 訂單金額計算模組 | 計算商品總額（運費前） | 🔴 高 |
| 運費規則引擎 | 套用「VIP > 2000 免運」邏輯 | 🔴 高 |
| 結帳顯示層（UI） | 顯示實際運費與免運提示 | 🟠 中 |
| 訂單／帳務模組 | 最終運費寫入與帳務一致性 | 🔴 高 |

---

## 三、Capabilities（主要能力）

> 系統「能做什麼」，對應可測行為

| 能力 | 說明 | 風險等級 |
|---|---|---|
| 辨識登入後會員等級 | 第三方登入後仍能正確套用 VIP 規則 | 🔴 高 |
| 套用免運條件 | VIP 且金額 > 2000 → 運費 0 | 🔴 高 |
| 邊界值處理 | 2000 / 2001 的差異行為 | 🔴 高 |
| 一般會員處理 | 一般會員不論金額 → 運費 100 | 🟠 中 |
| 回退與重算 | 金額變動即時重算運費 | 🟠 中 |

---

## 四、潛在高風險區域（測試重點）

### 🔥 最高風險（必測）
- **會員身分 × 運費規則交會點**：第三方登入後 VIP 身分是否正確帶入結帳
- **金額邊界值**：2000 vs 2001 的判斷
- **前後端不一致**：UI 顯示免運但後端實際收費（或反之）

### ⚠️ 次高風險（應測）
- 活動期間切換（跨日／快取）
- 購物車金額變動後的運費重算
