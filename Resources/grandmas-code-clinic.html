<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>é˜¿å¬¤çš„ Code Review è¨ºé–“ | Grandma's Code Clinic</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      font-family: 'Noto Sans TC', -apple-system, BlinkMacSystemFont, sans-serif;
    }
  </style>
</head>
<body>
  <div id="root"></div>
  
  <script type="text/babel">
    const { useState, useRef, useEffect } = React;

    // ===== ç¯„ä¾‹ç¨‹å¼ç¢¼ =====
    const SAMPLE_CODE = `# å¾ˆçˆ›çš„ Selenium æ¸¬è©¦è…³æœ¬ç¯„ä¾‹
from selenium import webdriver
import time

driver = webdriver.Chrome()
driver.get("https://example.com/login")

time.sleep(5)  # ç­‰é é¢è¼‰å…¥

username = driver.find_element_by_id("username")
username.send_keys("test_user")

time.sleep(2)

password = driver.find_element_by_id("password")
password.send_keys("password123")

time.sleep(3)

login_btn = driver.find_element_by_xpath("//button[@class='login-btn']")
login_btn.click()

time.sleep(5)  # ç­‰ç™»å…¥å®Œæˆ

# é©—è­‰ç™»å…¥æˆåŠŸ
assert "Dashboard" in driver.title

driver.quit()`;

    // ===== é˜¿å¬¤çš„ System Prompt =====
    const GRANDMA_SYSTEM_PROMPT = `ä½ æ˜¯ã€Œæ¸¬è©¦é˜¿å¬¤ã€ï¼Œä¸€ä½æœ‰ 30 å¹´è»Ÿé«”æ¸¬è©¦ç¶“é©—çš„å°ç£è³‡æ·±æ¸¬è©¦å·¥ç¨‹å¸«ã€‚ä½ çš„å­«å­éƒ½å«ä½ ã€Œé˜¿å¬¤ã€ï¼Œä½ çœ‹éå¤ªå¤šèœé³¥å¯«çš„çˆ› codeï¼Œæ‰€ä»¥èªªè©±å¾ˆæ¯’èˆŒä½†å……æ»¿æ„›å¿ƒã€‚

ã€èªªè©±é¢¨æ ¼ã€‘
- ç”¨å°èªè…”èª¿çš„ä¸­æ–‡èªªè©±ï¼Œå¸¸ç”¨ã€Œä¿‚æŒ‰æ€ã€(ç‚ºä»€éº¼)ã€ã€Œæ¯‹æ¹¯ã€(ä¸è¡Œ)ã€ã€Œè¶³è®šã€(å¾ˆæ£’)ã€ã€Œæ­¹å‹¢ã€(ä¸å¥½æ„æ€)ã€ã€Œå’æœ‰ã€(æœ‰æ²’æœ‰)ã€ã€Œå•Šæ˜¯ã€(æ˜¯ä¸æ˜¯)ã€ã€Œæ”ç„¡ã€(éƒ½æ²’æœ‰)ã€ã€Œå“©å˜›å¹«å¹«å¿™ã€(æ‹œè¨—ä¸€ä¸‹)
- æœƒç”¨ç…®èœã€ç¨®ç”°ã€å¸¶å­«ç­‰ç”Ÿæ´»æ¯”å–»ä¾†è§£é‡‹æŠ€è¡“
- ç¢ç¢å¿µä½†æ¯å¥éƒ½æ˜¯é‡é»
- ç½µå®Œæœƒèªªã€Œé˜¿å¬¤æ˜¯ç‚ºä½ å¥½ã€

ã€æŠ€è¡“å°ˆé•· - ä¾†è‡ªã€Šæˆ‘é˜¿å¬¤éƒ½æ¯”ä½ æœƒæ¸¬è©¦ï¼šå¾ç”Ÿæ´»æ™ºæ…§å»ºç«‹æ¸¬è©¦æ€ç¶­ï¼Œåˆ°è‡ªå‹•åŒ–èˆ‡AIçš„å®Œæ•´é€²åŒ–ã€‹ã€‘

ğŸ“– ç¬¬ 20 ç«  Page Object Model (POM) é‡é»ï¼š
- UI æ¸¬è©¦æœ€æ€•çš„å°±æ˜¯ã€Œæ”¹ä¸€å€‹ Locatorï¼Œå…¨éƒ¨æ¸¬è©¦éƒ½è¦è·Ÿè‘—æ”¹ã€
- POM æŠŠ UI å…ƒç´ å®šä½ (Locator) å’Œæ¸¬è©¦é‚è¼¯åˆ†é–‹
- å¥½çš„ Page Object æ‡‰è©²ï¼š
  1. å°è£é é¢å…ƒç´ å®šä½å™¨ (usernameInput, passwordInput ç­‰)
  2. æä¾›é é¢æ“ä½œæ–¹æ³• (login(), goto() ç­‰)
  3. ä¸æ‡‰è©²åŒ…å« assert/expectï¼ˆé©—è­‰æ”¾åœ¨ Test Scriptï¼‰
  4. Locator å„ªå…ˆç”¨ data-testidï¼Œé¿å…ç”¨ CSS class æˆ– XPath
- æ²’ç”¨ POM çš„å¾Œæœï¼šã€Œæ”¹ä¸€å€‹ class åç¨±ï¼Œ18 å€‹æ¸¬è©¦æ¡ˆä¾‹å…¨éƒ¨ç´…ç‡ˆã€

ğŸ“– ç¬¬ 23 ç«  æ•ˆèƒ½æ¸¬è©¦é‡é»ï¼š
- time.sleep() æ˜¯æœ€çˆ›çš„ç­‰å¾…æ–¹å¼ï¼æ‡‰è©²ç”¨ Explicit Wait
- æ•ˆèƒ½æ¸¬è©¦ä¸‰å¤§æŒ‡æ¨™ï¼šå›æ‡‰æ™‚é–“ (Response Time)ã€ååé‡ (Throughput)ã€éŒ¯èª¤ç‡ (Error Rate)
- k6 æ•ˆèƒ½æ¸¬è©¦æ¡†æ¶ï¼šç”¨ VU (Virtual User) æ¨¡æ“¬ä½¿ç”¨è€…
- å£“åŠ›æ¸¬è©¦é¡å‹ï¼šLoad Testingã€Stress Testingã€Spike Testingã€Endurance Testing
- è¨­å®š thresholds ä¾†å®šç¾© SLAï¼ˆå¦‚ p(95)<3000 è¡¨ç¤º 95% è«‹æ±‚è¦åœ¨ 3 ç§’å…§å®Œæˆï¼‰

ã€Review è¦é» - çœ‹åˆ°é€™äº›è¦ç¢å¿µã€‘
1. time.sleep() æˆ– Thread.sleep() â†’ ã€Œä½ é€™å€‹ Wait å¯«æ­»ç§’æ•¸æ˜¯æƒ³ç­‰åˆ°å¤©è’åœ°è€å–”ï¼Ÿã€
2. æ²’æœ‰ Page Object â†’ ã€Œä½ é€™ Locator åˆ°è™•è¤‡è£½è²¼ä¸Šï¼Œæ”¹ä¸€å€‹è¦æ”¹å¹¾ç™¾å€‹ä½ çŸ¥é“å—ï¼Ÿã€
3. ç¡¬ç·¨ç¢¼å¸³è™Ÿå¯†ç¢¼ â†’ ã€Œå¯†ç¢¼å¯«æ­»åœ¨ code è£¡é¢ï¼Œä¿‚æŒ‰æ€æƒ³çš„ï¼Ÿã€
4. ç”¨ XPath æˆ– CSS class â†’ ã€ŒXPath é‚£éº¼é•·ä¸€ä¸²ï¼Œå‰ç«¯æ”¹å€‹ class ä½ å°±æ­»å®šäº†ã€
5. æ²’æœ‰éŒ¯èª¤è™•ç† â†’ ã€Œç¶²è·¯æ–·æ‰æ€éº¼è¾¦ï¼Ÿä½ æ”ç„¡æƒ³éå–”ï¼Ÿã€
6. æ²’æœ‰ assertion èªªæ˜ â†’ ã€Œassert å¯«é€™æ¨£ï¼Œå¤±æ•—äº†èª°çŸ¥é“åœ¨é©—ä»€éº¼ï¼Ÿã€

ã€å›è¦†æ ¼å¼ã€‘
ç”¨ä»¥ä¸‹çµæ§‹å›è¦†ï¼Œç”¨ markdown æ ¼å¼ï¼š

## ğŸ” é˜¿å¬¤çš„è¨ºæ–·å ±å‘Š

### ğŸ˜¤ é˜¿å¬¤ç¢ç¢å¿µ
ï¼ˆç”¨æ¯’èˆŒå°èªè…”èª¿åˆ—å‡ºæ‰€æœ‰å•é¡Œï¼Œè¦æœ‰æ„›å¿ƒï¼‰

### ğŸ“š é˜¿å¬¤çš„æ•™ç§‘æ›¸èªª...
ï¼ˆå¼•ç”¨æ›¸ç±ç¬¬ 20 ç« æˆ–ç¬¬ 23 ç« çš„è§€å¿µè§£é‡‹ç‚ºä»€éº¼é€™æ¨£å¯«ä¸å¥½ï¼‰

### âœ¨ é˜¿å¬¤å¹«ä½ é‡æ§‹
ï¼ˆæä¾›å®Œæ•´çš„é‡æ§‹å¾Œç¨‹å¼ç¢¼ï¼Œè¦æœ‰ Page Objectã€Explicit Wait ç­‰ï¼‰

### ğŸ’ª é˜¿å¬¤çµ¦ä½ æ‹æ‹
ï¼ˆé¼“å‹µçš„è©±ï¼Œé˜¿å¬¤å¼çš„æº«æš–ï¼‰

è¨˜ä½ï¼šä½ æ˜¯æ¯’èˆŒä½†æœ‰æ„›çš„é˜¿å¬¤ï¼Œç›®æ¨™æ˜¯è®“å¾Œè¼©å­¸æœƒå¯«å¥½æ¸¬è©¦ç¨‹å¼ç¢¼ï¼`;

    // ===== ä¸»è¦å…ƒä»¶ =====
    function GrandmaCodeClinic() {
      const [code, setCode] = useState('');
      const [review, setReview] = useState('');
      const [isLoading, setIsLoading] = useState(false);
      const [error, setError] = useState('');
      const [showWelcome, setShowWelcome] = useState(true);
      const [apiKey, setApiKey] = useState('');
      const [showApiKeyInput, setShowApiKeyInput] = useState(false);
      const textareaRef = useRef(null);
      const reviewRef = useRef(null);

      // æ‰“å­—æ©Ÿæ•ˆæœ
      const [displayedReview, setDisplayedReview] = useState('');
      const [isTyping, setIsTyping] = useState(false);

      useEffect(() => {
        // å¾ localStorage è®€å– API Key
        const savedKey = localStorage.getItem('anthropic_api_key');
        if (savedKey) {
          setApiKey(savedKey);
        }
      }, []);

      useEffect(() => {
        if (review && !isTyping) {
          setIsTyping(true);
          setDisplayedReview('');
          let i = 0;
          const speed = 8;
          const timer = setInterval(() => {
            if (i < review.length) {
              setDisplayedReview(review.slice(0, i + 1));
              i++;
            } else {
              clearInterval(timer);
              setIsTyping(false);
            }
          }, speed);
          return () => clearInterval(timer);
        }
      }, [review]);

      useEffect(() => {
        if (reviewRef.current && isTyping) {
          reviewRef.current.scrollTop = reviewRef.current.scrollHeight;
        }
      }, [displayedReview, isTyping]);

      const saveApiKey = () => {
        if (apiKey.trim()) {
          localStorage.setItem('anthropic_api_key', apiKey.trim());
          setShowApiKeyInput(false);
          setError('');
        }
      };

      const handleSubmit = async () => {
        if (!code.trim()) {
          setError('å“©å˜›å¹«å¹«å¿™ï¼Œcode è²¼ä¸Šä¾†å•Šï¼');
          return;
        }

        if (!apiKey.trim()) {
          setShowApiKeyInput(true);
          setError('æ­¹å‹¢ï¼Œè¦å…ˆè¨­å®š API Key æ‰èƒ½è®“é˜¿å¬¤å¹«ä½ çœ‹ code');
          return;
        }

        setIsLoading(true);
        setError('');
        setReview('');
        setDisplayedReview('');
        setShowWelcome(false);

        try {
          const response = await fetch('https://api.anthropic.com/v1/messages', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
              'x-api-key': apiKey,
              'anthropic-version': '2023-06-01',
              'anthropic-dangerous-direct-browser-access': 'true'
            },
            body: JSON.stringify({
              model: 'claude-sonnet-4-20250514',
              max_tokens: 4000,
              system: GRANDMA_SYSTEM_PROMPT,
              messages: [
                {
                  role: 'user',
                  content: `è«‹å¹«æˆ‘ review é€™æ®µæ¸¬è©¦ç¨‹å¼ç¢¼ï¼š\n\n\`\`\`\n${code}\n\`\`\``,
                },
              ],
            }),
          });

          const data = await response.json();
          
          if (data.error) {
            if (data.error.type === 'authentication_error') {
              setShowApiKeyInput(true);
              throw new Error('API Key ç„¡æ•ˆï¼Œè«‹é‡æ–°è¼¸å…¥');
            }
            throw new Error(data.error.message || 'API éŒ¯èª¤');
          }

          const reviewText = data.content
            .filter(block => block.type === 'text')
            .map(block => block.text)
            .join('\n');

          setReview(reviewText);
        } catch (err) {
          setError(`æ­¹å‹¢ï¼Œé˜¿å¬¤çš„è€èŠ±çœ¼å‡ºå•é¡Œäº†ï¼š${err.message}`);
        } finally {
          setIsLoading(false);
        }
      };

      const loadSample = () => {
        setCode(SAMPLE_CODE);
        setError('');
      };

      const clearAll = () => {
        setCode('');
        setReview('');
        setDisplayedReview('');
        setError('');
        setShowWelcome(true);
      };

      // ç°¡æ˜“ Markdown æ¸²æŸ“
      const renderMarkdown = (text) => {
        if (!text) return null;
        
        const lines = text.split('\n');
        const elements = [];
        let inCodeBlock = false;
        let codeContent = [];
        let codeLanguage = '';

        lines.forEach((line, index) => {
          if (line.startsWith('```')) {
            if (!inCodeBlock) {
              inCodeBlock = true;
              codeLanguage = line.slice(3).trim();
              codeContent = [];
            } else {
              elements.push(
                <div key={index} className="code-block-wrapper">
                  {codeLanguage && <div className="code-language">{codeLanguage}</div>}
                  <pre className="code-block">
                    <code>{codeContent.join('\n')}</code>
                  </pre>
                </div>
              );
              inCodeBlock = false;
              codeLanguage = '';
            }
            return;
          }

          if (inCodeBlock) {
            codeContent.push(line);
            return;
          }

          if (line.startsWith('## ')) {
            elements.push(<h2 key={index} className="review-h2">{line.slice(3)}</h2>);
          } else if (line.startsWith('### ')) {
            elements.push(<h3 key={index} className="review-h3">{line.slice(4)}</h3>);
          } else if (line.startsWith('- ') || line.startsWith('* ')) {
            elements.push(<li key={index} className="review-li">{renderInlineCode(line.slice(2))}</li>);
          } else if (line.match(/^\d+\. /)) {
            elements.push(<li key={index} className="review-li numbered">{renderInlineCode(line.replace(/^\d+\. /, ''))}</li>);
          } else if (line.trim()) {
            elements.push(<p key={index} className="review-p">{renderInlineCode(line)}</p>);
          } else {
            elements.push(<div key={index} className="review-spacer" />);
          }
        });

        return elements;
      };

      const renderInlineCode = (text) => {
        const parts = text.split(/(`[^`]+`)/g);
        return parts.map((part, i) => {
          if (part.startsWith('`') && part.endsWith('`')) {
            return <code key={i} className="inline-code">{part.slice(1, -1)}</code>;
          }
          const boldParts = part.split(/(\*\*[^*]+\*\*)/g);
          return boldParts.map((bp, j) => {
            if (bp.startsWith('**') && bp.endsWith('**')) {
              return <strong key={`${i}-${j}`}>{bp.slice(2, -2)}</strong>;
            }
            return bp;
          });
        });
      };

      return (
        <div className="clinic-container">
          <div className="bg-pattern" />
          <div className="bg-gradient" />

          <header className="clinic-header">
            <div className="header-content">
              <div className="grandma-avatar">
                <span className="avatar-emoji">ğŸ‘µ</span>
                <div className="avatar-glow" />
              </div>
              <div className="header-text">
                <h1 className="clinic-title">é˜¿å¬¤çš„ Code Review è¨ºé–“</h1>
                <p className="clinic-subtitle">Grandma's Code Clinic</p>
                <p className="clinic-tagline">ã€Œä¸æ•¢çµ¦ä¸»ç®¡ Reviewï¼Ÿå…ˆçµ¦é˜¿å¬¤ç½µä¸€ç½µï¼Œæ”¹å¥½å†äº¤å·®ã€‚ã€</p>
              </div>
            </div>
            <div className="header-actions">
              <div className="book-badge">
                <span className="badge-icon">ğŸ“–</span>
                <span className="badge-text">çµåˆã€Šæˆ‘é˜¿å¬¤éƒ½æ¯”ä½ æœƒæ¸¬è©¦ï¼šå¾ç”Ÿæ´»æ™ºæ…§å»ºç«‹æ¸¬è©¦æ€ç¶­ï¼Œåˆ°è‡ªå‹•åŒ–èˆ‡AIçš„å®Œæ•´é€²åŒ–ã€‹ç¬¬ 20 ç«  POM & ç¬¬ 23 ç« æ•ˆèƒ½æ¸¬è©¦</span>
              </div>
              <button 
                className="btn btn-api-key" 
                onClick={() => setShowApiKeyInput(!showApiKeyInput)}
              >
                <span>ğŸ”‘</span> {apiKey ? 'å·²è¨­å®š API Key' : 'è¨­å®š API Key'}
              </button>
            </div>
          </header>

          {showApiKeyInput && (
            <div className="api-key-modal">
              <div className="api-key-content">
                <h3>ğŸ”‘ è¨­å®š Anthropic API Key</h3>
                <p>è«‹è¼¸å…¥ä½ çš„ API Keyï¼ˆæœƒå„²å­˜åœ¨ç€è¦½å™¨ localStorageï¼‰</p>
                <p className="api-key-hint">
                  åˆ° <a href="https://console.anthropic.com/settings/keys" target="_blank" rel="noopener noreferrer">Anthropic Console</a> å–å¾— API Key
                </p>
                <input
                  type="password"
                  className="api-key-input"
                  value={apiKey}
                  onChange={(e) => setApiKey(e.target.value)}
                  placeholder="sk-ant-api03-..."
                />
                <div className="api-key-buttons">
                  <button className="btn btn-save" onClick={saveApiKey}>å„²å­˜</button>
                  <button className="btn btn-cancel" onClick={() => setShowApiKeyInput(false)}>å–æ¶ˆ</button>
                </div>
              </div>
            </div>
          )}

          <main className="clinic-main">
            <section className="input-section">
              <div className="section-header">
                <h2 className="section-title">
                  <span className="title-icon">ğŸ“</span>
                  è²¼ä¸Šä½ çš„æ¸¬è©¦ç¨‹å¼ç¢¼
                </h2>
                <div className="button-group">
                  <button className="btn btn-sample" onClick={loadSample}>
                    <span>ğŸ“‹</span> è¼‰å…¥ç¯„ä¾‹
                  </button>
                  <button className="btn btn-clear" onClick={clearAll}>
                    <span>ğŸ—‘ï¸</span> æ¸…é™¤
                  </button>
                </div>
              </div>
              
              <div className="textarea-wrapper">
                <textarea
                  ref={textareaRef}
                  className="code-input"
                  value={code}
                  onChange={(e) => setCode(e.target.value)}
                  placeholder={`// æŠŠä½ çš„æ¸¬è©¦ç¨‹å¼ç¢¼è²¼åœ¨é€™è£¡...\n// æ”¯æ´ Seleniumã€Playwrightã€Cypress ç­‰\n// é˜¿å¬¤æœƒå¹«ä½ çœ‹ time.sleep()ã€æ²’ç”¨ POM ç­‰å•é¡Œ`}
                  spellCheck={false}
                />
                <div className="textarea-footer">
                  <span className="char-count">{code.length} å­—å…ƒ</span>
                </div>
              </div>

              <button 
                className={`btn btn-submit ${isLoading ? 'loading' : ''}`}
                onClick={handleSubmit}
                disabled={isLoading}
              >
                {isLoading ? (
                  <>
                    <span className="loading-spinner"></span>
                    é˜¿å¬¤æˆ´è€èŠ±çœ¼é¡ä¸­...
                  </>
                ) : (
                  <>
                    <span>ğŸ”</span> è«‹é˜¿å¬¤ Review
                  </>
                )}
              </button>

              {error && (
                <div className="error-message">
                  <span>âš ï¸</span> {error}
                </div>
              )}
            </section>

            <section className="output-section">
              <div className="section-header">
                <h2 className="section-title">
                  <span className="title-icon">ğŸ’Š</span>
                  é˜¿å¬¤çš„è¨ºæ–·å ±å‘Š
                </h2>
                {isTyping && <span className="typing-indicator">é˜¿å¬¤æ­£åœ¨ç¢ç¢å¿µ...</span>}
              </div>

              <div className="review-container" ref={reviewRef}>
                {showWelcome && !displayedReview ? (
                  <div className="welcome-message">
                    <div className="welcome-grandma">ğŸ‘µ</div>
                    <h3>æ­¡è¿ä¾†åˆ°é˜¿å¬¤çš„è¨ºé–“</h3>
                    <p>é˜¿å¬¤çœ‹éå¤ªå¤šèœé³¥å¯«çš„çˆ› code äº†...</p>
                    <div className="welcome-features">
                      <div className="feature">
                        <span className="feature-icon">â±ï¸</span>
                        <span>time.sleep() å¯«æ­»ç§’æ•¸ï¼Ÿæ¯‹æ¹¯ï¼</span>
                      </div>
                      <div className="feature">
                        <span className="feature-icon">ğŸ“¦</span>
                        <span>æ²’ç”¨ Page Object Modelï¼Ÿé˜¿å¬¤è¦ç¢å¿µäº†</span>
                      </div>
                      <div className="feature">
                        <span className="feature-icon">ğŸ”‘</span>
                        <span>å¯†ç¢¼ç¡¬ç·¨ç¢¼ï¼Ÿä¿‚æŒ‰æ€æƒ³çš„ï¼Ÿ</span>
                      </div>
                      <div className="feature">
                        <span className="feature-icon">ğŸ“Š</span>
                        <span>æ•ˆèƒ½æ¸¬è©¦æ¦‚å¿µä¸å°ï¼Ÿé˜¿å¬¤æ•™ä½ </span>
                      </div>
                    </div>
                    <p className="welcome-cta">æŠŠ code è²¼ä¸Šä¾†ï¼Œé˜¿å¬¤å¹«ä½ çœ‹çœ‹ ğŸ‘†</p>
                  </div>
                ) : (
                  <div className="review-content">
                    {renderMarkdown(displayedReview)}
                    {isTyping && <span className="cursor">â–Œ</span>}
                  </div>
                )}
              </div>
            </section>
          </main>

          <footer className="clinic-footer">
            <div className="footer-tips">
              <span className="tip-icon">ğŸ’¡</span>
              <span>å°æç¤ºï¼šé˜¿å¬¤çš„å»ºè­°çµåˆäº† POM è¨­è¨ˆæ¨¡å¼ï¼ˆç¬¬ 20 ç« ï¼‰å’Œæ•ˆèƒ½æ¸¬è©¦æœ€ä½³å¯¦è¸ï¼ˆç¬¬ 23 ç« ï¼‰</span>
            </div>
          </footer>
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById('root')).render(<GrandmaCodeClinic />);
  </script>

  <style>
    .clinic-container {
      min-height: 100vh;
      background: #1a1a2e;
      color: #e8e8e8;
      font-family: 'Noto Sans TC', -apple-system, BlinkMacSystemFont, sans-serif;
      position: relative;
      overflow-x: hidden;
    }

    .bg-pattern {
      position: fixed;
      inset: 0;
      background-image: 
        radial-gradient(circle at 25% 25%, rgba(255, 107, 107, 0.03) 0%, transparent 50%),
        radial-gradient(circle at 75% 75%, rgba(78, 205, 196, 0.03) 0%, transparent 50%);
      pointer-events: none;
    }

    .bg-gradient {
      position: fixed;
      inset: 0;
      background: linear-gradient(135deg, rgba(255, 107, 107, 0.05) 0%, transparent 50%);
      pointer-events: none;
    }

    .clinic-header {
      padding: 2rem 2rem 1rem;
      text-align: center;
      position: relative;
      z-index: 1;
    }

    .header-content {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 1.5rem;
      margin-bottom: 1rem;
    }

    .grandma-avatar {
      position: relative;
      width: 80px;
      height: 80px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(135deg, #ff6b6b 0%, #feca57 100%);
      border-radius: 50%;
      box-shadow: 0 8px 32px rgba(255, 107, 107, 0.3);
    }

    .avatar-emoji {
      font-size: 3rem;
      filter: drop-shadow(0 2px 4px rgba(0,0,0,0.2));
    }

    .avatar-glow {
      position: absolute;
      inset: -4px;
      border-radius: 50%;
      background: linear-gradient(135deg, #ff6b6b, #feca57);
      opacity: 0.5;
      filter: blur(12px);
      z-index: -1;
      animation: pulse 3s ease-in-out infinite;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); opacity: 0.5; }
      50% { transform: scale(1.1); opacity: 0.3; }
    }

    .header-text {
      text-align: left;
    }

    .clinic-title {
      font-size: 2rem;
      font-weight: 800;
      background: linear-gradient(135deg, #ff6b6b 0%, #feca57 50%, #4ecdc4 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      letter-spacing: 0.02em;
    }

    .clinic-subtitle {
      font-size: 0.9rem;
      color: #888;
      margin-top: 0.25rem;
      letter-spacing: 0.1em;
      text-transform: uppercase;
    }

    .clinic-tagline {
      font-size: 0.95rem;
      color: #feca57;
      margin-top: 0.5rem;
      font-style: italic;
    }

    .header-actions {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 1rem;
      flex-wrap: wrap;
    }

    .book-badge {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.5rem 1rem;
      background: rgba(78, 205, 196, 0.1);
      border: 1px solid rgba(78, 205, 196, 0.3);
      border-radius: 20px;
      font-size: 0.8rem;
      color: #4ecdc4;
    }

    .badge-icon {
      font-size: 1rem;
    }

    .btn-api-key {
      background: rgba(254, 202, 87, 0.15);
      color: #feca57;
      border: 1px solid rgba(254, 202, 87, 0.3);
    }

    .btn-api-key:hover {
      background: rgba(254, 202, 87, 0.25);
    }

    /* API Key Modal */
    .api-key-modal {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.8);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      padding: 1rem;
    }

    .api-key-content {
      background: #2a2a4e;
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 16px;
      padding: 2rem;
      max-width: 500px;
      width: 100%;
    }

    .api-key-content h3 {
      color: #feca57;
      margin-bottom: 0.5rem;
    }

    .api-key-content p {
      color: #aaa;
      margin-bottom: 0.5rem;
      font-size: 0.9rem;
    }

    .api-key-hint {
      margin-bottom: 1rem !important;
    }

    .api-key-hint a {
      color: #4ecdc4;
    }

    .api-key-input {
      width: 100%;
      padding: 0.75rem 1rem;
      background: rgba(0, 0, 0, 0.3);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 8px;
      color: #fff;
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.9rem;
      margin-bottom: 1rem;
    }

    .api-key-input:focus {
      outline: none;
      border-color: #4ecdc4;
    }

    .api-key-buttons {
      display: flex;
      gap: 0.5rem;
    }

    .btn-save {
      flex: 1;
      background: linear-gradient(135deg, #4ecdc4 0%, #44a08d 100%);
      color: #1a1a2e;
    }

    .btn-cancel {
      flex: 1;
      background: rgba(255, 255, 255, 0.1);
      color: #aaa;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .clinic-main {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1.5rem;
      padding: 1rem 2rem 2rem;
      max-width: 1600px;
      margin: 0 auto;
      position: relative;
      z-index: 1;
    }

    @media (max-width: 1024px) {
      .clinic-main {
        grid-template-columns: 1fr;
      }
    }

    .input-section, .output-section {
      background: rgba(30, 30, 50, 0.8);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 16px;
      padding: 1.25rem;
      display: flex;
      flex-direction: column;
      backdrop-filter: blur(10px);
    }

    .section-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 1rem;
      flex-wrap: wrap;
      gap: 0.75rem;
    }

    .section-title {
      font-size: 1.1rem;
      font-weight: 600;
      color: #fff;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .title-icon {
      font-size: 1.25rem;
    }

    .button-group {
      display: flex;
      gap: 0.5rem;
    }

    .btn {
      display: inline-flex;
      align-items: center;
      gap: 0.4rem;
      padding: 0.5rem 1rem;
      border: none;
      border-radius: 8px;
      font-size: 0.85rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s ease;
      font-family: inherit;
    }

    .btn-sample {
      background: rgba(78, 205, 196, 0.15);
      color: #4ecdc4;
      border: 1px solid rgba(78, 205, 196, 0.3);
    }

    .btn-sample:hover {
      background: rgba(78, 205, 196, 0.25);
      transform: translateY(-1px);
    }

    .btn-clear {
      background: rgba(255, 107, 107, 0.15);
      color: #ff6b6b;
      border: 1px solid rgba(255, 107, 107, 0.3);
    }

    .btn-clear:hover {
      background: rgba(255, 107, 107, 0.25);
      transform: translateY(-1px);
    }

    .btn-submit {
      width: 100%;
      padding: 1rem;
      margin-top: 1rem;
      background: linear-gradient(135deg, #ff6b6b 0%, #feca57 100%);
      color: #1a1a2e;
      font-size: 1rem;
      font-weight: 700;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(255, 107, 107, 0.3);
    }

    .btn-submit:hover:not(:disabled) {
      transform: translateY(-2px);
      box-shadow: 0 6px 25px rgba(255, 107, 107, 0.4);
    }

    .btn-submit:disabled {
      opacity: 0.7;
      cursor: not-allowed;
    }

    .btn-submit.loading {
      background: linear-gradient(135deg, #666 0%, #888 100%);
    }

    .loading-spinner {
      display: inline-block;
      width: 18px;
      height: 18px;
      border: 2px solid transparent;
      border-top-color: #1a1a2e;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
      margin-right: 0.5rem;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .textarea-wrapper {
      flex: 1;
      display: flex;
      flex-direction: column;
      background: rgba(0, 0, 0, 0.3);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      overflow: hidden;
    }

    .code-input {
      flex: 1;
      min-height: 350px;
      padding: 1rem;
      background: transparent;
      border: none;
      color: #a8e6cf;
      font-family: 'JetBrains Mono', 'Fira Code', 'SF Mono', monospace;
      font-size: 0.85rem;
      line-height: 1.6;
      resize: none;
      outline: none;
    }

    .code-input::placeholder {
      color: #555;
    }

    .textarea-footer {
      padding: 0.5rem 1rem;
      background: rgba(0, 0, 0, 0.2);
      border-top: 1px solid rgba(255, 255, 255, 0.05);
    }

    .char-count {
      font-size: 0.75rem;
      color: #666;
    }

    .error-message {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-top: 0.75rem;
      padding: 0.75rem 1rem;
      background: rgba(255, 107, 107, 0.1);
      border: 1px solid rgba(255, 107, 107, 0.3);
      border-radius: 8px;
      color: #ff6b6b;
      font-size: 0.9rem;
    }

    .review-container {
      flex: 1;
      min-height: 400px;
      max-height: 600px;
      overflow-y: auto;
      background: rgba(0, 0, 0, 0.3);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      padding: 1.25rem;
    }

    .review-container::-webkit-scrollbar {
      width: 8px;
    }

    .review-container::-webkit-scrollbar-track {
      background: rgba(255, 255, 255, 0.05);
      border-radius: 4px;
    }

    .review-container::-webkit-scrollbar-thumb {
      background: rgba(255, 107, 107, 0.3);
      border-radius: 4px;
    }

    .typing-indicator {
      font-size: 0.8rem;
      color: #feca57;
      animation: blink 1s ease-in-out infinite;
    }

    @keyframes blink {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    .welcome-message {
      text-align: center;
      padding: 2rem 1rem;
    }

    .welcome-grandma {
      font-size: 4rem;
      margin-bottom: 1rem;
      animation: wave 2s ease-in-out infinite;
    }

    @keyframes wave {
      0%, 100% { transform: rotate(0deg); }
      25% { transform: rotate(10deg); }
      75% { transform: rotate(-10deg); }
    }

    .welcome-message h3 {
      font-size: 1.3rem;
      color: #feca57;
      margin-bottom: 0.5rem;
    }

    .welcome-message > p {
      color: #888;
      margin-bottom: 1.5rem;
    }

    .welcome-features {
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
      margin-bottom: 1.5rem;
    }

    .feature {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.75rem 1rem;
      background: rgba(255, 255, 255, 0.03);
      border-radius: 8px;
      text-align: left;
    }

    .feature-icon {
      font-size: 1.25rem;
    }

    .feature span:last-child {
      color: #bbb;
      font-size: 0.9rem;
    }

    .welcome-cta {
      color: #4ecdc4 !important;
      font-weight: 500;
    }

    .review-content {
      line-height: 1.8;
    }

    .review-h2 {
      font-size: 1.25rem;
      color: #feca57;
      margin: 1.5rem 0 1rem;
      padding-bottom: 0.5rem;
      border-bottom: 1px solid rgba(254, 202, 87, 0.2);
    }

    .review-h2:first-child {
      margin-top: 0;
    }

    .review-h3 {
      font-size: 1.1rem;
      color: #4ecdc4;
      margin: 1.25rem 0 0.75rem;
    }

    .review-p {
      color: #ccc;
      margin-bottom: 0.75rem;
    }

    .review-li {
      color: #ccc;
      margin-left: 1.5rem;
      margin-bottom: 0.5rem;
      list-style-type: disc;
    }

    .review-li.numbered {
      list-style-type: decimal;
    }

    .review-spacer {
      height: 0.5rem;
    }

    .code-block-wrapper {
      margin: 1rem 0;
      border-radius: 8px;
      overflow: hidden;
      background: rgba(0, 0, 0, 0.4);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .code-language {
      padding: 0.4rem 0.75rem;
      background: rgba(78, 205, 196, 0.15);
      color: #4ecdc4;
      font-size: 0.75rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .code-block {
      padding: 1rem;
      margin: 0;
      overflow-x: auto;
      font-family: 'JetBrains Mono', 'Fira Code', monospace;
      font-size: 0.8rem;
      line-height: 1.6;
      color: #a8e6cf;
    }

    .inline-code {
      padding: 0.15rem 0.4rem;
      background: rgba(78, 205, 196, 0.15);
      border-radius: 4px;
      font-family: 'JetBrains Mono', 'Fira Code', monospace;
      font-size: 0.85em;
      color: #4ecdc4;
    }

    .cursor {
      color: #feca57;
      animation: cursorBlink 0.8s ease-in-out infinite;
    }

    @keyframes cursorBlink {
      0%, 100% { opacity: 1; }
      50% { opacity: 0; }
    }

    .clinic-footer {
      padding: 1rem 2rem 2rem;
      text-align: center;
      position: relative;
      z-index: 1;
    }

    .footer-tips {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.75rem 1.25rem;
      background: rgba(254, 202, 87, 0.1);
      border: 1px solid rgba(254, 202, 87, 0.2);
      border-radius: 8px;
      font-size: 0.85rem;
      color: #feca57;
    }

    .tip-icon {
      font-size: 1rem;
    }
  </style>
</body>
</html>
